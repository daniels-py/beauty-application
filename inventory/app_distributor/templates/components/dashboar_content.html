{% load static %}
{% load django_browser_reload %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'css/dashboar_content.css' %}" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="{% static 'js/dashboard.js' %}" defer></script>
    <title>Panel de Control</title>
</head>
<body>



    <div class="grid-container">
        <!-- Bloque para Usuarios -->
        <div class="block block1">
            <i class="fas fa-user icon-user"></i>
            <div class="content">
                <h2>Usuarios Registrados</h2>
                <span class="count">Cargando...</span> <!-- Aquí se actualizará con JS -->
            </div>
        </div>

        <!-- Bloque para Categorías -->
        <div class="block block2">
            <i class="fas fa-th-list icon-category"></i>
            <div class="content">
                <h2>Categorías Disponibles</h2>
                <span class="count">Cargando...</span> <!-- Aquí se actualizará con JS -->
            </div>
        </div>

        <!-- Bloque para Marcas -->
        <div class="block block3">
            <i class="fas fa-tags icon-brand"></i>
            <div class="content">
                <h2>Marcas Disponibles</h2>
                <span class="count">Cargando...</span> <!-- Aquí se actualizará con JS -->
            </div>
        </div>

        <!-- Bloque para Presentaciones -->
        <div class="block block4">
            <i class="fas fa-box-open icon-presentation"></i>
            <div class="content">
                <h2>Presentaciones Disponibles</h2>
                <span class="count">Cargando...</span> <!-- Aquí se actualizará con JS -->
            </div>
        </div>

        <!-- Bloque para Cartas de Color -->
        <div class="block block5">
            <i class="fas fa-palette icon-color"></i>
            <div class="content">
                <h2>Cartas de Color</h2>
                <span class="count">Cargando...</span> <!-- Aquí se actualizará con JS -->
            </div>
        </div>

        <!-- Bloque para Productos -->
        <div class="block block6">
            <i class="fas fa-box icon-product"></i>
            <div class="content">
                <h2>Productos Disponibles</h2>
                <span class="count">Cargando...</span> <!-- Aquí se actualizará con JS -->
            </div>
        </div>
    </div>
    <script>
        function updateCounts() {
            fetch('{% url "dashboard_counts" %}')
                .then(response => response.json())
                .then(data => {
                    // Actualiza los contadores en la interfaz
                    document.querySelector('.block1 .count').textContent = data.user_count > 0 ? data.user_count : 'No existen datos registrados';
                    document.querySelector('.block2 .count').textContent = data.categoria_count > 0 ? data.categoria_count : 'No existen datos registrados';
                    document.querySelector('.block3 .count').textContent = data.marca_count > 0 ? data.marca_count : 'No existen datos registrados';
                    document.querySelector('.block4 .count').textContent = data.presentacion_count > 0 ? data.presentacion_count : 'No existen datos registrados';
                    document.querySelector('.block5 .count').textContent = data.carta_color_count > 0 ? data.carta_color_count : 'No existen datos registrados';
                    document.querySelector('.block6 .count').textContent = data.producto_count > 0 ? data.producto_count : 'No existen datos registrados';
                })
                .catch(error => console.error('Error fetching counts:', error));
        }

        // Llama a la función al cargar la página
        document.addEventListener('DOMContentLoaded', updateCounts);
    </script>

</body>
</html>
